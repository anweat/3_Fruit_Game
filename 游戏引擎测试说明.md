# 游戏引擎测试说明

## 功能概述

已成功将 GameEngine 游戏引擎连接到 Qt 界面的休闲模式按钮！

## 使用方法

### 1. 运行程序
```bash
cd d:\codeproject\DataSructure\06-General\Game_Qoder_2
.\build\bin\FruitCrush.exe
```

### 2. 测试流程

1. **启动主界面**
   - 程序启动后会显示主菜单
   - 可以看到"休闲模式"、"比赛模式"、"排行榜"、"成就"等按钮

2. **进入游戏引擎测试**
   - 点击 **"休闲模式"** 按钮
   - 自动初始化 GameEngine
   - 显示游戏测试界面

3. **查看游戏状态**
   测试界面会显示：
   - 🎮 游戏引擎状态
   - 💯 当前分数
   - 🔥 连击数
   - ✅ 是否有可移动
   - 🌎 8×8 游戏地图（使用水果表情符号）

4. **测试交换功能**
   - 点击 **"测试交换 (0,0) <-> (0,1)"** 按钮
   - 会尝试交换第一行前两个水果
   - 如果能产生匹配，会自动消除并更新分数
   - 如果不能匹配，会显示失败消息
   - 可以多次点击测试不同位置的交换结果

5. **返回主菜单**
   - 点击 **"返回主菜单"** 按钮
   - 返回到游戏主菜单

## 显示说明

### 水果符号
- 🍎 苹果 (APPLE)
- 🍊 橙子 (ORANGE)
- 🍇 葡萄 (GRAPE)
- 🍌 香蕉 (BANANA)
- 🍉 西瓜 (WATERMELON)
- 🍓 草莓 (STRAWBERRY)

### 特殊元素标记
如果水果带有特殊属性，会附加字母标记：
- **H** = 横向直线炸弹 (LINE_H)
- **V** = 纵向直线炸弹 (LINE_V)
- **D** = 菱形炸弹 (DIAMOND)
- **R** = 万能炸弹 (RAINBOW)

例如：🍎H 表示带有横向直线炸弹属性的苹果

## 实现细节

### 集成的核心系统
1. **GameEngine** - 游戏主引擎
   - 地图初始化
   - 交换验证
   - 游戏主循环
   - 连锁消除

2. **FruitGenerator** - 水果生成器
   - 随机生成水果
   - 保证无初始三连

3. **MatchDetector** - 匹配检测器
   - 检测横向/纵向匹配
   - 检测 L/T 形状匹配

4. **SpecialFruitGenerator** - 特殊元素生成器
   - 4消生成直线炸弹
   - 5+消生成万能炸弹
   - L/T形生成菱形炸弹

5. **SpecialEffectProcessor** - 特殊效果处理器
   - 处理单个特殊效果
   - 处理特殊元素组合

6. **ScoreCalculator** - 分数计算器
   - 基础分数计算
   - 连击倍率加成

7. **FallProcessor** - 下落处理器
   - 重力下落
   - 空位填充

## 测试建议

1. **初始化测试**
   - 观察初始地图是否没有三连
   - 检查"有可移动"是否为"是"

2. **交换测试**
   - 多次点击测试交换
   - 观察成功/失败的不同情况
   - 成功交换后观察分数变化

3. **连锁消除测试**
   - 如果一次交换触发连锁，观察分数和连击数的变化
   - 观察地图的自动下落和填充

4. **特殊元素测试**
   - 观察是否生成特殊元素（带H/V/D/R标记）
   - 后续可以手动构造特殊元素组合测试

## 后续开发方向

- [ ] 添加鼠标点击选择水果功能
- [ ] 添加交换动画效果
- [ ] 添加消除动画效果
- [ ] 实现完整的休闲模式（道具、成就等）
- [ ] 实现比赛模式
- [ ] 完善UI设计和美化
