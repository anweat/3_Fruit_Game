# 🎨 奶油风格样式系统说明

## 概述

本项目采用模块化的QSS样式表设计，实现了统一、优雅、简洁的奶油风格界面。

## 样式文件结构

```
resources/styles/
├── main.qss           - 主窗口和全局样式
├── buttons.qss        - 按钮样式（包括主菜单、道具、购买按钮）
├── login.qss          - 登录界面样式
├── game.qss           - 游戏界面样式
├── achievement.qss    - 成就对话框样式
└── scrollbar.qss      - 滚动条样式
```

## 设计特点

### 🍰 奶油风格特色

- **柔和配色**：米色、浅粉、浅黄为主色调
- **圆角设计**：所有按钮和容器采用圆角，更加柔和
- **渐变效果**：使用线性渐变实现层次感
- **明亮基调**：整体明亮但不刺眼
- **高对比文字**：确保可读性

### 🎨 主要配色

| 用途 | 颜色代码 | 说明 |
|------|---------|------|
| 主背景 | #FFF8F0 → #FFF0E6 | 奶油白渐变 |
| OpenGL游戏背景 | #FFF8F0 | 奶油白色 |
| 游戏网格边框 | #FFD4B8 | 桃色 |
| 游戏单元格背景 | #FFF5ED | 浅奶油色 |
| 主按钮 | #FFD4B8 → #FFB6A3 | 桃色渐变 |
| 登录按钮 | #A8E6CF → #7FD4A8 | 薄荷绿渐变 |
| 游客按钮 | #FFE4B8 → #FFD4A3 | 金黄色渐变 |
| 购买按钮 | #FFE66D → #FFD93D | 金币黄渐变 |
| 边框/分隔线 | #FFE4D6 | 浅桃色 |
| 滚动条 | #FFF5ED / #FFD4B8 | 奶油白/桃色 |
| 选中框 | #FFB6A3 / #FF6B35 | 桃色/深桃色 |
| 成就标题 | #FF6B35 | 深桃色 |
| 成就背景 | #FFFFFF → #FFF5ED | 白色渐变 |

### 🌈 游戏元素配色

#### 特殊水果高亮
- **横/竖线特效**：#FFB347（金黄色）
- **钻石特效**：#87CEFA（浅蓝色）
- **彩虹特效**：#FFB5C2（浅粉色）

#### 道具选中框
- **锤子**：#F5DEB3（小麦色）
- **夹子**：#AED9E6（浅蓝色）
- **魔法棒**：#EDC9ED（浅紫色）
- **边框强调色**：#FF6B35（深桃色）

### 🔧 组件样式特性

#### 按钮
- **主菜单按钮**：大尺寸，明显边框，悬停时渐变变化
- **道具按钮**：
  - 锤子：棕色系 (#FFF8F0 → #FFE4D6)
  - 夹子：蓝色系 (#F0F8FF → #E6F3FF)
  - 魔法棒：紫色系 (#FFF0FF → #FFE6FF)
- **购买按钮**：金色，带禁用状态处理

#### 输入框
- 白色背景，浅色边框
- 悬停和焦点时边框颜色加深
- 圆角设计

#### 滚动条
- 细窄设计（14px）
- 半透明背景
- 圆角滑块
- 悬停/按下时颜色变化

## 使用方法

### 在代码中应用样式

样式通过 `StyleLoader` 类自动加载：

```cpp
#include "ui/StyleLoader.h"

// 在main.cpp中
StyleLoader::applyStyles();
```

### 为组件添加特定样式

使用 `objectName` 来指定特定样式：

```cpp
QPushButton* button = new QPushButton("按钮");
button->setObjectName("loginButton");  // 应用登录按钮样式
```

### 修改样式

1. 编辑对应的 `.qss` 文件
2. 重新编译项目（CMake会自动复制样式文件）
3. 运行程序即可看到新样式

## 样式选择器说明

### 按对象名称
```css
QPushButton#loginButton { }
QLabel#statusLabel { }
```

### 按属性
```css
QPushButton[text="返回主菜单"] { }
QPushButton[toolTip*="锤子"] { }  /* 包含"锤子"的tooltip */
QLabel[text*="分数"] { }          /* 包含"分数"的文本 */
```

### 按状态
```css
QPushButton:hover { }    /* 悬停 */
QPushButton:pressed { }  /* 按下 */
QPushButton:disabled { } /* 禁用 */
QLineEdit:focus { }      /* 焦点 */
```

## 扩展指南

### 添加新组件样式

1. 选择合适的样式文件（或创建新文件）
2. 添加选择器和样式规则
3. 在 `StyleLoader.h` 中添加文件加载

```cpp
// StyleLoader.h
static QString loadAllStyles() {
    QString combinedStyle;
    combinedStyle += loadStyleFile(":/styles/main.qss");
    combinedStyle += loadStyleFile(":/styles/your_new_style.qss");  // 新增
    // ...
    return combinedStyle;
}
```

4. 在 `CMakeLists.txt` 中添加资源文件

```cmake
set(RESOURCE_FILES
    # ...
    resources/styles/your_new_style.qss
)
```

### 创建不同主题

可以创建多套样式文件，通过切换加载不同的样式集：

```
resources/styles/
├── cream/           # 奶油风格（当前）
│   ├── main.qss
│   ├── buttons.qss
│   └── ...
├── dark/            # 暗色主题
│   ├── main.qss
│   ├── buttons.qss
│   └── ...
└── classic/         # 经典主题
    ├── main.qss
    ├── buttons.qss
    └── ...
```

## 注意事项

1. **Qt6兼容性**：本样式表使用Qt6语法，与Qt5可能存在差异
2. **CSS兼容性**：
   - ⚠️ QSS不支持 `-webkit-background-clip`、`text-shadow` 等CSS专有属性
   - ✅ 已从样式文件中移除所有不兼容属性，避免运行时警告
   - 使用纯QSS属性实现相同或相近的视觉效果
3. **性能**：大量使用渐变可能影响性能，建议在低端设备上测试
4. **编码**：所有QSS文件使用UTF-8编码
5. **路径**：资源文件路径在StyleLoader中支持`:/`前缀（资源系统）和文件系统路径
6. **材质亮度**：OpenGL水果材质已调亮15%（glColor4f值从1.0提升至1.15），更好融入奶油风格

## 调试技巧

### 查看加载日志
程序启动时会输出样式加载日志：
```
Loaded style file: ":/styles/main.qss"
Loaded style file: ":/styles/buttons.qss"
✅ Styles applied successfully
```

### 样式未生效排查
1. 检查选择器是否正确（objectName、属性等）
2. 确认样式文件是否被正确复制到build目录
3. 查看是否有硬编码样式覆盖了QSS样式
4. 使用Qt Creator的样式调试工具

### 实时预览
可以在运行时动态修改样式：
```版本更新记录

### v1.1 (2025年12月15日)
- ✅ 修复QSS兼容性问题，移除不支持的CSS属性
- ✅ 优化OpenGL材质亮度，提升15%使其更明亮
- ✅ 完善游戏元素配色说明
- ✅ 添加特殊水果高亮和道具选中框配色文档

### v1.0 (2025年12月15日)
- 🎨 初始版本，实现完整奶油风格UI系统
- 📦 创建6个模块化QSS样式文件
- 🔧 实现StyleLoader样式加载器
- 🎮 统一OpenGL游戏渲染与Qt UI风格
- 📚 编写完整的样式系统说明文档

## 贡献

欢迎提交新的样式主题或改进现有样式！

---

*最后更新：2025年12月15日*
*版本：v1.1
---

*最后更新：2025年12月15日*
*版本：v1.0*
